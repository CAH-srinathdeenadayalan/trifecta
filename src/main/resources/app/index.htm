<!DOCTYPE html>
<html ng-app="trifecta">
<head>
    <title>Trifecta v0.17.1: Dashboard</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link href="/stylesheets/index.css" type="text/css" rel="stylesheet" media=screen>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
    <script src="/js/app.js" type="text/javascript"></script>
</head>

<body ng-controller="DashboardCtrl">
    <h2><span class="title1">Tri</span><span class="title2">fec</span><span class="title3">ta</span> <span class="version">v0.17.1</span></h2>

    <div style="display: block; width: 100%">
        <div style="display: inline; width: 40%; float: left">
            <fieldset style="border-radius: 5px 5px 5px 5px">
                <legend style="font-weight: bold">Kafka Topics</legend>
                <table style="width: 100%">
                    <tr ng-repeat="t in topics" ng-class="t == topic ? 'highlighted' : ''">
                        <td style="width: 16px; height: 16px"><img src="/images/status/greenlight.png"></td>
                        <td><a ng-click="updateTopic(t)">{{t.topic}}</a></td>
                    </tr>
                </table>
                </fieldset>

            <fieldset style="height: 160px; border-radius: 5px 5px 5px 5px">
                <legend style="font-weight: bold">Messages and Offsets</legend>
                <table style="width: 100%">
                    <tr>
                        <th>Partition</th>
                        <th>Start</th>
                        <th>End</th>
                        <th>Messages</th>
                    </tr>
                    <tr ng-repeat="p in topic.partitions" ng-class="p == partition ? 'highlighted' : ''">
                        <td><a ng-click="updatePartition(p)">{{p.partition}}</a></td>
                        <td>{{p.startOffset}}</td>
                        <td>{{p.endOffset}}</td>
                        <td>{{p.messages | number}}</td>
                    </tr>
                </table>
            </fieldset>

            <fieldset style="height: 160px; border-radius: 5px 5px 5px 5px">
                <legend style="font-weight: bold">Leaders and Replicas</legend>
                <table style="width: 100%">
                    <tr>
                        <th>Leader</th>
                        <td>{{partition.leader}}</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr ng-repeat="r in partition.replicas">
                        <th>Replica{{index}}</th>
                        <td>{{r.broker}}</td>
                        <td style="color: #008000; font-weight: bold">{{r.status}}</td>
                    </tr>
                </table>
            </fieldset>
        </div>

        <div style="display: inline; width: 59%; float: right; margin-top: 12px">
            <div style="display: block; margin-bottom: 5px">
                <div style="display: inline; border: 1px solid; border-radius: 5px 5px 5px 5px; background: #eeeeee; padding: 3px; margin-right: 3px">
                   Partition
                    <select ng-model="partition" ng-options="p.partition for p in topic.partitions">
                    </select>
                </div>
                <div style="display: inline; border: 1px solid; border-radius: 5px 5px 5px 5px; background: #eeeeee; padding: 3px; margin-right: 3px">
                    Offset <input ng-model="partition.offset" type="text" size="16">
                    <img style="vertical-align: middle" src="/images/buttons/navigation/message-first.gif">
                    <img style="vertical-align: middle" src="/images/buttons/navigation/message-prev.gif">
                    <img style="vertical-align: middle" src="/images/buttons/navigation/message-next.gif">
                    <img style="vertical-align: middle" src="/images/buttons/navigation/message-last.gif">
                </div>
                <div style="display: inline; border: 1px solid; border-radius: 5px 5px 5px 5px; background: #eeeeee; padding: 3px">
                    Decoder
                    <select ng-model="decoder" ng-options="formatDecoder(d) for d in decoders">
                    </select>
                    <img style="vertical-align: middle" src="/images/buttons/add.png">
                </div>
            </div>

            <fieldset style="border-radius: 5px 5px 5px 5px; height: 540px; background: #ffffee">
                <pre>{{ message() }}</pre>
            </fieldset>
        </div>

        <br style="clear: both" />
    </div>
</body>
</html>
